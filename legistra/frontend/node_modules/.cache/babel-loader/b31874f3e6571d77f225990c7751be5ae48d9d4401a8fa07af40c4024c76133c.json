{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sarjeet Singh\\\\OneDrive\\\\Desktop\\\\Legistra\\\\legistra\\\\frontend\\\\src\\\\pages\\\\Analysis.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { analyzeDocument, getTaskStatus, getDocuments, exportAnalysis } from '../services/api';\nimport { FileText, AlertCircle, Download, CheckCircle, Loader, Shield } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Analysis = () => {\n  _s();\n  const [documents, setDocuments] = useState([]);\n  const [selectedDocument, setSelectedDocument] = useState('');\n  const [analysisResult, setAnalysisResult] = useState(null);\n  const [taskId, setTaskId] = useState(null);\n  const [status, setStatus] = useState('');\n  const [error, setError] = useState('');\n  useEffect(() => {\n    fetchDocuments();\n  }, []);\n  const fetchDocuments = async () => {\n    try {\n      const response = await getDocuments();\n      setDocuments(response.data.documents);\n    } catch (err) {\n      setError('Failed to fetch documents');\n    }\n  };\n  const handleAnalyze = async () => {\n    if (!selectedDocument) {\n      setError('Please select a document');\n      return;\n    }\n    setError('');\n    setAnalysisResult(null);\n    setStatus('Starting analysis...');\n    try {\n      const response = await analyzeDocument(selectedDocument);\n      setTaskId(response.data.task_id);\n      setStatus('Processing...');\n      pollTaskStatus(response.data.task_id);\n    } catch (err) {\n      setError('Failed to start analysis');\n    }\n  };\n  const pollTaskStatus = id => {\n    const interval = setInterval(async () => {\n      try {\n        const response = await getTaskStatus(id);\n        const task = response.data;\n        setStatus(task.state);\n        if (task.state === 'SUCCESS') {\n          setAnalysisResult(task.result);\n          clearInterval(interval);\n        } else if (task.state === 'FAILURE') {\n          setError('Analysis failed');\n          clearInterval(interval);\n        }\n      } catch (err) {\n        setError('Failed to check task status');\n        clearInterval(interval);\n      }\n    }, 1000);\n  };\n  const isValidHeading = heading => {\n    if (!heading || typeof heading !== 'string') return false;\n    const trimmed = heading.trim();\n    if (trimmed.length === 0) return false;\n    if (/^[\\d\\s.]+$/.test(trimmed)) return false;\n    const lower = trimmed.toLowerCase();\n    if (['clause', 'unnamed', 'unnamed clause', 'undefined', 'null', 'n/a', 'na'].includes(lower)) return false;\n    if (lower.startsWith('clause ') && lower.length < 15) return false;\n    if (trimmed.length < 3 || !/[a-zA-Z]/.test(trimmed)) return false;\n    return true;\n  };\n  const renderIdentifiedClauses = () => {\n    const mergedClauses = [];\n    analysisResult.analysis.clauses.forEach(clause => {\n      let heading = null;\n      let content = '';\n      if (typeof clause === 'string') {\n        content = clause.trim();\n      } else if (clause && typeof clause === 'object') {\n        content = (clause.content || '').trim();\n        if (isValidHeading(clause.heading)) {\n          heading = clause.heading.trim();\n        }\n      }\n      if (!content) return;\n      if (heading) {\n        mergedClauses.push({\n          heading,\n          content\n        });\n      } else {\n        if (mergedClauses.length > 0 && !mergedClauses[mergedClauses.length - 1].heading) {\n          mergedClauses[mergedClauses.length - 1].content += '\\n\\n' + content;\n        } else {\n          mergedClauses.push({\n            heading: null,\n            content\n          });\n        }\n      }\n    });\n    if (mergedClauses.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12 text-gray-400\",\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          className: \"w-16 h-16 mx-auto mb-4 opacity-50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg\",\n          children: \"No standard clauses identified in this document.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-3\",\n      children: mergedClauses.map((block, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-gray-200 rounded-lg p-5 bg-white hover:shadow-md transition-shadow duration-200\",\n        children: [block.heading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-lg text-gray-900\",\n            children: block.heading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap pl-7\",\n          children: block.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  };\n  const handleExportAnalysis = async () => {\n    try {\n      const response = await exportAnalysis(selectedDocument);\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', `analysis_report_${selectedDocument}.pdf`);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      setError('Failed to export analysis');\n    }\n  };\n  const getStatusIcon = () => {\n    if (status === 'SUCCESS') return /*#__PURE__*/_jsxDEV(CheckCircle, {\n      className: \"w-5 h-5 text-green-600\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 38\n    }, this);\n    if (status === 'FAILURE') return /*#__PURE__*/_jsxDEV(AlertCircle, {\n      className: \"w-5 h-5 text-red-600\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 38\n    }, this);\n    if (status === 'Processing...') return /*#__PURE__*/_jsxDEV(Loader, {\n      className: \"w-5 h-5 text-blue-600 animate-spin\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 44\n    }, this);\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-6xl mx-auto p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-gray-900 mb-2\",\n        children: \"Document Analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: \"Analyze legal documents and extract key clauses and insights\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(FileText, {\n          className: \"w-6 h-6 text-blue-600 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-gray-900\",\n          children: \"Select Document\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Choose a document to analyze\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedDocument,\n            onChange: e => setSelectedDocument(e.target.value),\n            className: \"w-full border border-gray-300 rounded-lg p-3 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select a document\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this), documents.map(doc => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: doc._id,\n              children: doc.filename\n            }, doc._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAnalyze,\n          disabled: !selectedDocument || status === 'Processing...',\n          className: \"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\",\n          children: status === 'Processing...' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Loader, {\n              className: \"w-5 h-5 animate-spin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), \"Analyzing...\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(FileText, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this), \"Analyze Document\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this), status && status !== 'Processing...' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2 text-sm\",\n          children: [getStatusIcon(), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: status === 'SUCCESS' ? 'text-green-700' : status === 'FAILURE' ? 'text-red-700' : 'text-gray-700',\n            children: status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\",\n          children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n            className: \"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-red-700\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), analysisResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"w-6 h-6 text-blue-600 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: \"Document Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-lg border border-blue-100\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-800 leading-relaxed\",\n            children: analysisResult.analysis.summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            className: \"w-6 h-6 text-blue-600 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: \"Identified Clauses\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this), renderIdentifiedClauses()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n            className: \"w-6 h-6 text-green-600 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: \"Clause Classification\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), analysisResult.analysis.classification && Object.keys(analysisResult.analysis.classification).length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 md:grid-cols-2 gap-3\",\n          children: Object.entries(analysisResult.analysis.classification).map(([category, percentage]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-gray-50 p-4 rounded-lg border border-gray-200\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-gray-900 capitalize\",\n                children: category.replace(/_/g, ' ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg font-semibold text-blue-600\",\n                children: [percentage.toFixed(1), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 266,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full bg-gray-200 rounded-full h-2\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-blue-600 h-2 rounded-full transition-all duration-500\",\n                style: {\n                  width: `${percentage}%`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 21\n            }, this)]\n          }, category, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500 text-center py-4\",\n          children: \"No clause classifications available.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-xl shadow-sm border border-gray-200 p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(Shield, {\n            className: \"w-6 h-6 text-amber-600 mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-xl font-semibold text-gray-900\",\n            children: \"Risk Assessment\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-amber-50 p-5 rounded-lg border border-amber-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-gray-900 mb-3 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n              className: \"w-5 h-5 text-amber-600\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 292,\n              columnNumber: 17\n            }, this), \"Identified Risks\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"space-y-2\",\n            children: analysisResult.analysis.risks.map((risk, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"flex items-start gap-2 text-sm text-gray-700\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-amber-600 font-bold mt-0.5\",\n                children: \"\\u2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: risk\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleExportAnalysis,\n          className: \"bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200 flex items-center gap-2 shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Download, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 15\n          }, this), \"Export Analysis Report\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n};\n_s(Analysis, \"SuPzkrckd/cJfjgdsky1lYmv5GY=\");\n_c = Analysis;\nexport default Analysis;\nvar _c;\n$RefreshReg$(_c, \"Analysis\");","map":{"version":3,"names":["React","useState","useEffect","analyzeDocument","getTaskStatus","getDocuments","exportAnalysis","FileText","AlertCircle","Download","CheckCircle","Loader","Shield","jsxDEV","_jsxDEV","Fragment","_Fragment","Analysis","_s","documents","setDocuments","selectedDocument","setSelectedDocument","analysisResult","setAnalysisResult","taskId","setTaskId","status","setStatus","error","setError","fetchDocuments","response","data","err","handleAnalyze","task_id","pollTaskStatus","id","interval","setInterval","task","state","result","clearInterval","isValidHeading","heading","trimmed","trim","length","test","lower","toLowerCase","includes","startsWith","renderIdentifiedClauses","mergedClauses","analysis","clauses","forEach","clause","content","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","block","index","handleExportAnalysis","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","remove","getStatusIcon","value","onChange","e","target","doc","_id","filename","onClick","disabled","summary","classification","Object","keys","entries","category","percentage","replace","toFixed","style","width","risks","risk","_c","$RefreshReg$"],"sources":["C:/Users/Sarjeet Singh/OneDrive/Desktop/Legistra/legistra/frontend/src/pages/Analysis.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { analyzeDocument, getTaskStatus, getDocuments, exportAnalysis } from '../services/api';\r\nimport { FileText, AlertCircle, Download, CheckCircle, Loader, Shield } from 'lucide-react';\r\n\r\nconst Analysis = () => {\r\n  const [documents, setDocuments] = useState([]);\r\n  const [selectedDocument, setSelectedDocument] = useState('');\r\n  const [analysisResult, setAnalysisResult] = useState(null);\r\n  const [taskId, setTaskId] = useState(null);\r\n  const [status, setStatus] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchDocuments();\r\n  }, []);\r\n\r\n  const fetchDocuments = async () => {\r\n    try {\r\n      const response = await getDocuments();\r\n      setDocuments(response.data.documents);\r\n    } catch (err) {\r\n      setError('Failed to fetch documents');\r\n    }\r\n  };\r\n\r\n  const handleAnalyze = async () => {\r\n    if (!selectedDocument) {\r\n      setError('Please select a document');\r\n      return;\r\n    }\r\n    setError('');\r\n    setAnalysisResult(null);\r\n    setStatus('Starting analysis...');\r\n    try {\r\n      const response = await analyzeDocument(selectedDocument);\r\n      setTaskId(response.data.task_id);\r\n      setStatus('Processing...');\r\n      pollTaskStatus(response.data.task_id);\r\n    } catch (err) {\r\n      setError('Failed to start analysis');\r\n    }\r\n  };\r\n\r\n  const pollTaskStatus = (id) => {\r\n    const interval = setInterval(async () => {\r\n      try {\r\n        const response = await getTaskStatus(id);\r\n        const task = response.data;\r\n        setStatus(task.state);\r\n        if (task.state === 'SUCCESS') {\r\n          setAnalysisResult(task.result);\r\n          clearInterval(interval);\r\n        } else if (task.state === 'FAILURE') {\r\n          setError('Analysis failed');\r\n          clearInterval(interval);\r\n        }\r\n      } catch (err) {\r\n        setError('Failed to check task status');\r\n        clearInterval(interval);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  const isValidHeading = (heading) => {\r\n    if (!heading || typeof heading !== 'string') return false;\r\n    const trimmed = heading.trim();\r\n    if (trimmed.length === 0) return false;\r\n    \r\n    if (/^[\\d\\s.]+$/.test(trimmed)) return false;\r\n    \r\n    const lower = trimmed.toLowerCase();\r\n    if (['clause', 'unnamed', 'unnamed clause', 'undefined', 'null', 'n/a', 'na'].includes(lower)) return false;\r\n    if (lower.startsWith('clause ') && lower.length < 15) return false;\r\n    \r\n    if (trimmed.length < 3 || !/[a-zA-Z]/.test(trimmed)) return false;\r\n    \r\n    return true;\r\n  };\r\n\r\n  const renderIdentifiedClauses = () => {\r\n    const mergedClauses = [];\r\n    \r\n    analysisResult.analysis.clauses.forEach((clause) => {\r\n      let heading = null;\r\n      let content = '';\r\n      \r\n      if (typeof clause === 'string') {\r\n        content = clause.trim();\r\n      } else if (clause && typeof clause === 'object') {\r\n        content = (clause.content || '').trim();\r\n        if (isValidHeading(clause.heading)) {\r\n          heading = clause.heading.trim();\r\n        }\r\n      }\r\n      \r\n      if (!content) return;\r\n      \r\n      if (heading) {\r\n        mergedClauses.push({ heading, content });\r\n      } else {\r\n        if (mergedClauses.length > 0 && !mergedClauses[mergedClauses.length - 1].heading) {\r\n          mergedClauses[mergedClauses.length - 1].content += '\\n\\n' + content;\r\n        } else {\r\n          mergedClauses.push({ heading: null, content });\r\n        }\r\n      }\r\n    });\r\n\r\n    if (mergedClauses.length === 0) {\r\n      return (\r\n        <div className=\"text-center py-12 text-gray-400\">\r\n          <FileText className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\r\n          <p className=\"text-lg\">No standard clauses identified in this document.</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-3\">\r\n        {mergedClauses.map((block, index) => (\r\n          <div key={index} className=\"border border-gray-200 rounded-lg p-5 bg-white hover:shadow-md transition-shadow duration-200\">\r\n            {block.heading && (\r\n              <div className=\"flex items-start mb-3\">\r\n                <FileText className=\"w-5 h-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0\" />\r\n                <h4 className=\"font-semibold text-lg text-gray-900\">\r\n                  {block.heading}\r\n                </h4>\r\n              </div>\r\n            )}\r\n            <div className=\"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap pl-7\">\r\n              {block.content}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const handleExportAnalysis = async () => {\r\n    try {\r\n      const response = await exportAnalysis(selectedDocument);\r\n      const url = window.URL.createObjectURL(new Blob([response.data]));\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.setAttribute('download', `analysis_report_${selectedDocument}.pdf`);\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      link.remove();\r\n    } catch (err) {\r\n      setError('Failed to export analysis');\r\n    }\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (status === 'SUCCESS') return <CheckCircle className=\"w-5 h-5 text-green-600\" />;\r\n    if (status === 'FAILURE') return <AlertCircle className=\"w-5 h-5 text-red-600\" />;\r\n    if (status === 'Processing...') return <Loader className=\"w-5 h-5 text-blue-600 animate-spin\" />;\r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6\">\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-3xl font-bold text-gray-900 mb-2\">Document Analysis</h2>\r\n        <p className=\"text-gray-600\">Analyze legal documents and extract key clauses and insights</p>\r\n      </div>\r\n\r\n      {/* Document Selection Card */}\r\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6\">\r\n        <div className=\"flex items-center mb-4\">\r\n          <FileText className=\"w-6 h-6 text-blue-600 mr-2\" />\r\n          <h3 className=\"text-xl font-semibold text-gray-900\">Select Document</h3>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Choose a document to analyze\r\n            </label>\r\n            <select\r\n              value={selectedDocument}\r\n              onChange={(e) => setSelectedDocument(e.target.value)}\r\n              className=\"w-full border border-gray-300 rounded-lg p-3 text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all\"\r\n            >\r\n              <option value=\"\">Select a document</option>\r\n              {documents.map((doc) => (\r\n                <option key={doc._id} value={doc._id}>\r\n                  {doc.filename}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleAnalyze}\r\n            disabled={!selectedDocument || status === 'Processing...'}\r\n            className=\"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2\"\r\n          >\r\n            {status === 'Processing...' ? (\r\n              <>\r\n                <Loader className=\"w-5 h-5 animate-spin\" />\r\n                Analyzing...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <FileText className=\"w-5 h-5\" />\r\n                Analyze Document\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          {status && status !== 'Processing...' && (\r\n            <div className=\"flex items-center gap-2 text-sm\">\r\n              {getStatusIcon()}\r\n              <span className={status === 'SUCCESS' ? 'text-green-700' : status === 'FAILURE' ? 'text-red-700' : 'text-gray-700'}>\r\n                {status}\r\n              </span>\r\n            </div>\r\n          )}\r\n\r\n          {error && (\r\n            <div className=\"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n              <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n              <p className=\"text-sm text-red-700\">{error}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {analysisResult && (\r\n        <div className=\"space-y-6\">\r\n          {/* Document Summary */}\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <FileText className=\"w-6 h-6 text-blue-600 mr-2\" />\r\n              <h3 className=\"text-xl font-semibold text-gray-900\">Document Summary</h3>\r\n            </div>\r\n            <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-lg border border-blue-100\">\r\n              <p className=\"text-gray-800 leading-relaxed\">{analysisResult.analysis.summary}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Identified Clauses */}\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <FileText className=\"w-6 h-6 text-blue-600 mr-2\" />\r\n              <h3 className=\"text-xl font-semibold text-gray-900\">Identified Clauses</h3>\r\n            </div>\r\n            {renderIdentifiedClauses()}\r\n          </div>\r\n\r\n          {/* Clause Classification Summary */}\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <CheckCircle className=\"w-6 h-6 text-green-600 mr-2\" />\r\n              <h3 className=\"text-xl font-semibold text-gray-900\">Clause Classification</h3>\r\n            </div>\r\n            {analysisResult.analysis.classification && Object.keys(analysisResult.analysis.classification).length > 0 ? (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n                {Object.entries(analysisResult.analysis.classification).map(([category, percentage]) => (\r\n                  <div key={category} className=\"bg-gray-50 p-4 rounded-lg border border-gray-200\">\r\n                    <div className=\"flex justify-between items-center mb-2\">\r\n                      <span className=\"font-medium text-gray-900 capitalize\">\r\n                        {category.replace(/_/g, ' ')}\r\n                      </span>\r\n                      <span className=\"text-lg font-semibold text-blue-600\">\r\n                        {percentage.toFixed(1)}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                      <div \r\n                        className=\"bg-blue-600 h-2 rounded-full transition-all duration-500\"\r\n                        style={{ width: `${percentage}%` }}\r\n                      ></div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-gray-500 text-center py-4\">No clause classifications available.</p>\r\n            )}\r\n          </div>\r\n\r\n          {/* Risk Assessment */}\r\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <Shield className=\"w-6 h-6 text-amber-600 mr-2\" />\r\n              <h3 className=\"text-xl font-semibold text-gray-900\">Risk Assessment</h3>\r\n            </div>\r\n            <div className=\"bg-amber-50 p-5 rounded-lg border border-amber-200\">\r\n              <h4 className=\"font-semibold text-gray-900 mb-3 flex items-center gap-2\">\r\n                <AlertCircle className=\"w-5 h-5 text-amber-600\" />\r\n                Identified Risks\r\n              </h4>\r\n              <ul className=\"space-y-2\">\r\n                {analysisResult.analysis.risks.map((risk, index) => (\r\n                  <li key={index} className=\"flex items-start gap-2 text-sm text-gray-700\">\r\n                    <span className=\"text-amber-600 font-bold mt-0.5\">â€¢</span>\r\n                    <span>{risk}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Export Analysis */}\r\n          <div className=\"flex justify-end\">\r\n            <button\r\n              onClick={handleExportAnalysis}\r\n              className=\"bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200 flex items-center gap-2 shadow-sm\"\r\n            >\r\n              <Download className=\"w-5 h-5\" />\r\n              Export Analysis Report\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Analysis;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}